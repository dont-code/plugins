(self.webpackChunkplugin_tester=self.webpackChunkplugin_tester||[]).push([[6635],{86635:(X,x,m)=>{m.r(x),m.d(x,{BasicEntityComponent:()=>G,BasicFieldsComponent:()=>U,BasicModule:()=>H,CountryComponent:()=>K,CurrencyComponent:()=>z,DontCodeApiStoreProvider:()=>F,EuroDollarComponent:()=>W,FieldsModule:()=>$,MoneyComponent:()=>J,RatingComponent:()=>Y,TimeFieldsComponent:()=>k,WebFieldsComponent:()=>O});var u=m(61395),c=m(19130);class y{getConfiguration(){return{plugin:{id:"BasicPlugin","display-name":"Dont code plugin for all base elements",version:"1.0.0"},"schema-updates":[{id:"entity-all",description:"Screens to directly list, edit, remove entities",changes:[{location:{parent:"#/$defs",id:"entity"},replace:!1}]},{id:"dont-code-storage",description:"Stores application data in Dont-code project storage",changes:[{location:{parent:"#/$defs/sharing",id:"with"},replace:!1,update:{enum:["Dont-code users"]}}]}],"preview-handlers":[{location:{parent:c.DontCodeModel.APP_ENTITIES,id:""},class:{name:"BasicEntityComponent",source:"basic"}},{location:{parent:c.DontCodeModel.APP_FIELDS,id:"type",values:["String","Number","Boolean"]},class:{name:"BasicFieldsComponent",source:"basic"}},{location:{parent:c.DontCodeModel.APP_FIELDS,id:"type",values:["Date","Date & Time","Time"]},class:{name:"TimeFieldsComponent",source:"basic"}},{location:{parent:c.DontCodeModel.APP_FIELDS,id:"type",values:["Website (url)","Image"]},class:{name:"WebFieldsComponent",source:"basic"}},{location:{parent:c.DontCodeModel.APP_SHARING,id:"with",values:["Dont-code users"]},class:{name:"DontCodeApiStoreProvider",source:"basic"}}]}}pluginInit(a){}}var _=m(85582),l=m(3955),g=m(84346),e=m(41855),h=m(77020),d=m(51295),f=m(77744);function C(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"th",4),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"p-sortIcon",5),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275propertyInterpolate1("id","header-",t.header,""),e.\u0275\u0275property("pSortableColumn",t.field),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.header," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("field",t.field)}}function w(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275template(1,C,3,4,"th",3),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)}}function q(n,a){1&n&&e.\u0275\u0275elementContainer(0)}function ee(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,q,1,0,"ng-container",9),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",r.templateOf(t,o[t.field]))}}function te(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",10),e.\u0275\u0275pipe(2,"beautifier"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"beautifier"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("pTooltip",e.\u0275\u0275pipeBind1(2,2,o[t.field])),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(4,4,o[t.field],50))}}function ne(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275template(1,ee,2,1,"ng-container",8),e.\u0275\u0275template(2,te,5,7,"ng-container",8),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.component),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.component)}}function oe(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"tr",6),e.\u0275\u0275template(1,ne,3,2,"td",7),e.\u0275\u0275elementEnd()),2&n){const o=a.columns;e.\u0275\u0275property("pSelectableRow",a.$implicit),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",o)}}let P=(()=>{class n extends l.PluginBaseComponent{constructor(t,o,r,i){super(r,o,t),this.modelMgr=i,this.selectedItemChange=new e.EventEmitter,this.cols=new Array,this.colsMap=new Map,this.entities=[],null==this.modelMgr&&(this.modelMgr=c.dtcde.getModelManager())}selectionChange(t){this.selectedItemChange.emit(t)}initCommandFlow(t,o){if(super.initCommandFlow(t,o),!this.entityPointer)throw new Error("Cannot listen to changes without knowing a base position");this.decomposeJsonToMultipleChanges(this.entityPointer,t.getJsonAt(this.entityPointer.position)),this.initChangeListening(!0)}handleChange(t){t.position!==this.entityPointer?.position&&this.applyUpdatesToArrayAsync(this.cols,this.colsMap,t,null,(o,r)=>this.loadSubComponent(o,r.type,r.name,this.provider?.getJsonAt(o.position)).then(i=>{const p=new re(r.name,r.name,r.type);return i&&i.canProvide(r.type).forInlineView&&(p.component=i,this.applyComponentToSubField(i,r.type,r.name)),p})).then(o=>{this.cols=o,this.ref.markForCheck(),this.ref.detectChanges()})}performAction(t){var o=this;return(0,_.Z)(function*(){if(null==t.pointer)return Promise.reject("No pointer for Action with position "+t.position);if(t.position==o.entityPointer?.position&&null!=o.entities)for(const r of o.cols)if(null!=r.component?.performAction)for(const i of o.entities)r.component?.setValue(i[r.field]),yield r.component.performAction(t)})()}retrieveColumnInfo(t){const o=this.colsMap.get(t);if(null!=o)return this.cols[o];throw new Error("Cannot find column with name "+t)}providesTemplates(){return new l.TemplateList(null,null,null)}canProvide(t){return new l.PossibleTemplateList(!1,!1,!1)}templateOf(t,o){if(null!=t.component){t.component.setValue(o);const r=t.component.providesTemplates(t.type).forInlineView;if(r)return r}throw new Error("No component or template to display "+t.type)}getStoreEntities(){return null!=this.entities?this.entities:[]}dataIsLoaded(){let t=this.getStoreEntities();if(t?.length>0){const o=new Array;o.push(...this.cols.map(i=>i.field));let r=0;for(;o.length>0&&r<t.length;){for(let i=0;i<o.length;i++)null!=t[r][o[i]]&&(o.splice(i,1),i--);r++}if(o.length>0&&o.length<this.cols.length)for(let i=0;i<this.cols.length;i++)if(o.indexOf(this.cols[i].field)>=0){this.cols.splice(i,1);for(let E of this.colsMap.entries())if(E[1]===i){this.colsMap.delete(E[0]);break}}}}customSort(t){null!=t.field&&null!=t.data&&this.modelMgr.sortValues(t.data,t.order,t.field)}static#e=this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(l.ComponentLoaderService),e.\u0275\u0275directiveInject(c.DontCodeModelManager))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dontcode-list-entity"]],inputs:{selectedItem:"selectedItem",entities:"entities"},outputs:{selectedItemChange:"selectedItemChange"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[["styleClass","p-datatable-striped","responsiveLayout","scroll","selectionMode","single",3,"columns","value","selection","customSort","selectionChange","sortFunction"],["pTemplate","header"],["pTemplate","body"],[3,"id","pSortableColumn",4,"ngFor","ngForOf"],[3,"id","pSortableColumn"],[3,"field"],[3,"pSelectableRow"],[4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngTemplateOutlet"],[3,"pTooltip"]],template:function(o,r){1&o&&(e.\u0275\u0275element(0,"dtcde-dynamic"),e.\u0275\u0275elementStart(1,"p-table",0),e.\u0275\u0275listener("selectionChange",function(p){return r.selectedItem=p})("selectionChange",function(p){return r.selectionChange(p)})("sortFunction",function(p){return r.customSort(p)}),e.\u0275\u0275template(2,w,2,1,"ng-template",1),e.\u0275\u0275template(3,oe,2,2,"ng-template",2),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("columns",r.cols)("value",r.getStoreEntities())("selection",r.selectedItem)("customSort",!0))},dependencies:[u.NgForOf,u.NgIf,u.NgTemplateOutlet,h.Table,d.PrimeTemplate,h.SortableColumn,h.SelectableRow,h.SortIcon,f.Tooltip,l.DynamicInsertPoint,l.BeautifierPipe]})}return n})();class re{constructor(a,t,o){this.field=a,this.header=t,this.type=o,this.component=null}}var s=m(77527),I=m(15627),R=m(51580);const ie=["defaulteditor"];function ae(n,a){1&n&&e.\u0275\u0275elementContainer(0)}const le=function(n){return{fieldName:n}};function se(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"label",6),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div"),e.\u0275\u0275template(5,ae,1,0,"ng-container",7),e.\u0275\u0275elementEnd()()()),2&n){const t=a.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("for",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",o.templateOf(t))("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(4,le,t.name))}}function ce(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",2),e.\u0275\u0275template(2,se,6,6,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.getSubFields())}}function me(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"input",10),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().fieldName;e.\u0275\u0275advance(1),e.\u0275\u0275property("name",t)("formControlName",t)}}function pe(n,a){if(1&n&&e.\u0275\u0275element(0,"textarea",11),2&n){const t=e.\u0275\u0275nextContext().fieldName;e.\u0275\u0275property("name",t)("formControlName",t)("autoResize",!0)}}function ue(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,2),e.\u0275\u0275template(1,me,2,2,"ng-container",8),e.\u0275\u0275template(2,pe,1,3,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.fieldName,o=e.\u0275\u0275reference(3),r=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",r.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.isShortText(t))("ngIfElse",o)}}let A=(()=>{class n extends l.PluginBaseComponent{set _value(t){this.setValue(t)}constructor(t,o,r,i){super(i,r,t),this.fb=o}ngOnInit(){this.form=this.fb.group({},{updateOn:"blur"}),this.updateValueOnFormChanges()}initCommandFlow(t,o){if(super.initCommandFlow(t,o),!this.entityPointer)throw new Error("Cannot listen to changes without knowing a base position");this.decomposeJsonToMultipleChanges(this.entityPointer,t.getJsonAt(this.entityPointer.position)),this.initChangeListening(!0),this.rebuildForm()}handleChange(t){t.position!==this.entityPointer?.position&&this.updateSubFieldsWithChange(t,null).then(o=>{null!=o&&(this.ref.markForCheck(),this.ref.detectChanges())})}providesTemplates(){return new l.TemplateList(null,null,null)}canProvide(t){return new l.PossibleTemplateList(!1,!1,!1)}templateOf(t){let o=t.component?.providesTemplates(t.type).forFullEdit;return o||(o=this.defaultTemplate),o}setForm(t){if(t)throw new Error("Trying to set a form to the Edit Entity component who already has one")}isShortText(t){const o=this.form.get(t)?.value;return null==o||o.length<50}getValue(){return super.getValue()}static#e=this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(s.FormBuilder),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(l.ComponentLoaderService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dontcode-edit-entity"]],viewQuery:function(o,r){if(1&o&&e.\u0275\u0275viewQuery(ie,5),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.defaultTemplate=i.first)}},inputs:{_value:["value","_value"]},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[4,"ngIf"],["defaulteditor",""],[3,"formGroup"],["class","formgrid grid",4,"ngFor","ngForOf"],[1,"formgrid","grid"],[1,"field","col-12"],[3,"for"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf","ngIfElse"],["smallText",""],["pInputText","",1,"w-full",3,"name","formControlName"],["pInputTextarea","",3,"name","formControlName","autoResize"]],template:function(o,r){1&o&&(e.\u0275\u0275element(0,"dtcde-dynamic"),e.\u0275\u0275template(1,ce,3,2,"ng-container",0),e.\u0275\u0275template(2,ue,4,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.value))},dependencies:[u.NgForOf,u.NgIf,u.NgTemplateOutlet,s.\u0275NgNoValidate,s.DefaultValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,I.InputText,s.FormGroupDirective,s.FormControlName,l.DynamicInsertPoint,R.InputTextarea]})}return n})();var S=m(46513),L=m(94764),V=m(2715);function de(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.newEntity())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.deleteEntity())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"i",8),e.\u0275\u0275elementStart(3,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.refreshScreen())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.saveEntity())}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("pTooltip","Create a new ",t.entityName,"."),e.\u0275\u0275property("disabled",t.dataLoading),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("pTooltip","Remove permanently the selected ",t.entityName,"."),e.\u0275\u0275property("disabled",!t.selectedItem),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("pTooltip","Refresh values of all ",t.entityName,"."),e.\u0275\u0275property("icon",t.refreshIcon)("disabled",t.dataLoading),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("pTooltip","Saves permanently the selected ",t.entityName,"."),e.\u0275\u0275property("disabled",!t.canSave)}}function fe(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.newEntity())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.deleteEntity())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"i",8),e.\u0275\u0275elementStart(3,"button",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.refreshScreen())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.saveEntity())}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("pTooltip","Create a new ",t.entityName,"."),e.\u0275\u0275property("disabled",t.dataLoading),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("pTooltip","Remove permanently the selected ",t.entityName,"."),e.\u0275\u0275property("disabled",!t.selectedItem),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("pTooltip","Refresh values of all ",t.entityName,"."),e.\u0275\u0275property("icon",t.refreshIcon)("disabled",t.dataLoading),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("pTooltip","Saves permanently the selected ",t.entityName,"."),e.\u0275\u0275property("disabled",!t.canSave)}}const ge=function(){return[]};let G=(()=>{class n extends l.PluginBaseComponent{static#e=this.baseRefreshIcons="pi pi-refresh";constructor(t,o,r,i){super(r,i,o),this.entityService=t,this.entityName="",this.canSave=!1,this.store=null,this.tabIndex=0,this.dataLoading=!1,this.refreshIcon=n.baseRefreshIcons}initCommandFlow(t,o){if(super.initCommandFlow(t,o),this.entityPointer){const r=t.getJsonAt(this.entityPointer.position);this.store=this.entityService.retrieveListManager(this.entityPointer,r),this.decomposeJsonToMultipleChanges(this.entityPointer,r)}this.initChangeListening()}ngAfterViewInit(){if(!this.entityPointer||!this.provider)throw new Error("Cannot create subcomponents before initCommandFlow is called");this.list.initCommandFlow(this.provider,this.entityPointer.subPropertyPointer(c.DontCodeModel.APP_FIELDS_NODE)),this.edit.initCommandFlow(this.provider,this.entityPointer.subPropertyPointer(c.DontCodeModel.APP_FIELDS_NODE)),null!=this.store&&this.store.loadAll().then(()=>{console.debug("Loaded entities");try{this.list.dataIsLoaded()}catch{console.debug("Just ignore errors when calling dataIsloaded")}this.ref.markForCheck(),this.ref.detectChanges()},t=>{this.ref.markForCheck(),this.ref.detectChanges()}),super.ngAfterViewInit()}initChangeListening(){if(super.initChangeListening(),!this.provider)throw new Error("Cannot create subcomponents before initCommandFlow is called");this.subscriptions.add(this.provider.receiveCommands(c.DontCodeModel.APP_SHARING_WITH).pipe((0,g.map)(t=>{this.store?(console.debug("Reloading data due to change of StoreManager"),this.store.reset(),this.store.loadAll().then(()=>{try{this.list.dataIsLoaded()}catch{console.debug("Just ignore errors when calling dataIsloaded")}this.ref.markForCheck(),this.ref.detectChanges()},o=>{this.ref.markForCheck(),this.ref.detectChanges()})):console.error("Cannot reload data because store is not set")})).subscribe())}handleChange(t){if(!t.pointer){if(!this.provider)throw new Error("Cannot handle change with no pointer for position"+t.position);t.pointer=this.provider.calculatePointerFor(t.position)}if(!this.entityPointer)throw new Error("Need an entityPointer to handle change @"+t.position);{const o=t.pointer.isUnderSubItemOf(this.entityPointer);if(o){if(o!==c.DontCodeModel.APP_ENTITIES_NAME_NODE)return;this.entityName=t.value}this.ref.markForCheck(),this.ref.detectChanges()}}selectChange(t){var o=this;return(0,_.Z)(function*(){t?(null!=o.store&&(yield o.store.loadDetailOf(t).then(r=>{null!=r&&(o.selectedItem=r)}).catch(r=>{console.error("Ignoring the failed loading of "+t._id+" due to ",r)})),o.canSave=!0,o.tabIndex=1):o.canSave=!1,o.ref.markForCheck(),o.ref.detectChanges()})()}deleteEntity(){var t=this;return(0,_.Z)(function*(){t.selectedItem&&t.store&&(yield t.store.remove(t.selectedItem).then(o=>{t.selectedItem=null,t.canSave=!1,t.tabIndex=0,t.ref.markForCheck(),t.ref.detectChanges()}))})()}newEntity(){const t={};this.store?.push(t),this.selectedItem=t,this.canSave=!0,this.tabIndex=1}saveEntity(){var t=this;return(0,_.Z)(function*(){if(t.selectedItem){t.canSave=!1;try{t.edit.getValue(),yield t.store?.store(t.selectedItem).then(o=>{console.debug("Entity named ",t.entityName+" with value "+o," stored at position "+t.entityPointer?.position),t.selectedItem=o,t.tabIndex=0}).catch(o=>{console.error("Entity named ",t.entityName," not saved because of ",o)})}finally{t.canSave=!0,t.ref.markForCheck(),t.ref.detectChanges()}}})()}providesTemplates(){return new l.TemplateList(null,null,null)}canProvide(t){return new l.PossibleTemplateList(!1,!1,!1)}refreshScreen(){var t=this;return(0,_.Z)(function*(){if(console.debug("Refresh called"),null==t.entityPointer)return Promise.reject("No entityPointer");if(0!=t.tabIndex)return Promise.reject("Not displaying the list");try{t.refreshIcon=n.baseRefreshIcons+" pi-spin",console.debug("Performing action"),yield t.pluginHelper.performAction(new c.Action(t.entityPointer?.position,null,c.ActionContextType.LIST,c.ActionType.EXTRACT,t.entityPointer)),console.debug("Marking for Check"),t.ref.markForCheck(),t.ref.detectChanges(),console.debug("Storing Changed values"),yield t.store?.storeAllChanged(),console.debug("Stored values changed")}catch(o){console.error("Error ",o," performing refresh action on ",t.entityName,t.entityPointer)}finally{t.refreshIcon=n.baseRefreshIcons,t.ref.markForCheck(),t.ref.detectChanges()}})()}static#t=this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(l.EntityStoreService),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(l.ComponentLoaderService),e.\u0275\u0275directiveInject(e.Injector))};static#n=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dontcode-basic-entity"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(P,5),e.\u0275\u0275viewQuery(A,5)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.list=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.edit=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:7,consts:[["pTemplate","left"],[3,"activeIndex","activeIndexChange"],["header","List"],[3,"entities","selectedItem","selectedItemChange"],["header","Edit",3,"disabled"],[3,"value"],["name","new","pButton","","icon","pi pi-plus",1,"p-button-rounded","p-button-success","p-mr-2",3,"pTooltip","disabled","click"],["name","delete","pButton","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"pTooltip","disabled","click"],[1,"pi","pi-minus","p-mx-2",2,"font-size","0.5rem"],["name","refresh","pButton","",1,"p-button-rounded","p-button-warning",3,"icon","pTooltip","disabled","click"],["name","save","pButton","","icon","pi pi-save",1,"p-button-rounded","p-button-warning",3,"pTooltip","disabled","click"],["name","new-bottom","pButton","","icon","pi pi-plus",1,"p-button-rounded","p-button-success","p-mr-2",3,"pTooltip","disabled","click"],["name","delete-bottom","pButton","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"pTooltip","disabled","click"],["name","refresh-bottom","pButton","",1,"p-button-rounded","p-button-warning",3,"icon","pTooltip","disabled","click"],["name","save-bottom","pButton","","icon","pi pi-save",1,"p-button-rounded","p-button-warning",3,"pTooltip","disabled","click"]],template:function(o,r){if(1&o&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"p-toolbar"),e.\u0275\u0275template(3,de,5,9,"ng-template",0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p-tabView",1),e.\u0275\u0275listener("activeIndexChange",function(p){return r.tabIndex=p}),e.\u0275\u0275elementStart(5,"p-tabPanel",2)(6,"dontcode-list-entity",3),e.\u0275\u0275listener("selectedItemChange",function(p){return r.selectedItem=p})("selectedItemChange",function(p){return r.selectChange(p)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"p-tabPanel",4),e.\u0275\u0275element(8,"dontcode-edit-entity",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"p-toolbar"),e.\u0275\u0275template(10,fe,5,9,"ng-template",0),e.\u0275\u0275elementEnd()),2&o){let i;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("List of ",r.entityName,""),e.\u0275\u0275advance(3),e.\u0275\u0275property("activeIndex",r.tabIndex),e.\u0275\u0275advance(2),e.\u0275\u0275property("entities",null!==(i=null==r.store?null:r.store.entities)&&void 0!==i?i:e.\u0275\u0275pureFunction0(6,ge))("selectedItem",r.selectedItem),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!r.selectedItem),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",r.selectedItem)}},dependencies:[d.PrimeTemplate,S.TabView,S.TabPanel,L.Toolbar,V.ButtonDirective,f.Tooltip,P,A],changeDetection:0})}return n})();var B=m(95958),v=m(82456);const he=["INPUT"],_e=["NUMERIC"],Ce=["CHECK"],ye=["LIST_CHECK"];function ve(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,4),e.\u0275\u0275element(1,"input",5),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("name",t.name)("formControlName",t.name)}}function Te(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,4),e.\u0275\u0275element(1,"p-inputNumber",6),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("name",t.name)("formControlName",t.name)("showButtons",!0)}}function xe(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,4),e.\u0275\u0275element(1,"p-checkbox",7),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("name",t.name)("formControlName",t.name)("binary",!0)}}function Ie(n,a){if(1&n&&e.\u0275\u0275element(0,"p-checkbox",8),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("readonly",!0)("binary",!0)("ngModel",t.value)}}let U=(()=>{class n extends l.AbstractDynamicComponent{constructor(){super(...arguments),this.control=new s.FormControl(null,{updateOn:"blur"}),this.isJson=!1}setForm(t){super.setForm(t),this.form.registerControl(this.name,this.control)}providesTemplates(t){switch(this.type!=t&&(console.warn("BasicField Type is changed from "+this.type+" to "+t),this.type=t),t){case"Number":return new l.TemplateList(null,null,this.numericTemplate);case"Boolean":return new l.TemplateList(this.listCheckTemplate,null,this.checkTemplate);default:return new l.TemplateList(null,null,this.inputTemplate)}}canProvide(t){return this.type=t,new l.PossibleTemplateList("Boolean"===t,!1,!0)}transformToFormGroupValue(t){return"Text"===this.type&&"string"!=typeof t?(this.isJson=!0,null!=t?JSON.stringify(t,null,2):t):super.transformToFormGroupValue(t)}transformFromFormGroupValue(t){if(!this.isJson)return t;try{return JSON.parse(t)}catch{console.error("Cannot convert field with name "+this.name+" from text String to an object")}}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}();static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["plugins-basic-fields"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(he,5),e.\u0275\u0275viewQuery(_e,5),e.\u0275\u0275viewQuery(Ce,5),e.\u0275\u0275viewQuery(ye,5)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.inputTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.numericTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.checkTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.listCheckTemplate=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:0,consts:[["INPUT",""],["NUMERIC",""],["CHECK",""],["LIST_CHECK",""],[3,"formGroup"],["pInputText","",3,"name","formControlName"],[3,"name","formControlName","showButtons"],[3,"name","formControlName","binary"],[3,"readonly","binary","ngModel"]],template:function(o,r){1&o&&(e.\u0275\u0275template(0,ve,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(2,Te,2,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,xe,2,4,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,Ie,1,3,"ng-template",null,3,e.\u0275\u0275templateRefExtractor))},dependencies:[B.Checkbox,s.DefaultValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.NgModel,v.InputNumber,I.InputText,s.FormGroupDirective,s.FormControlName]})}return n})();var T=m(56241),b=m(22123);let F=(()=>{class n extends c.AbstractDontCodeStoreProvider{constructor(t,o,r){super(),this.http=t,this.modelMgr=o,this.configService=r,this.subscriptions=new T.Subscription,this.apiUrl="https://test.dont-code.net/data",this.docUrl="https://test.dont-code.net/documents",this.updateConfig(this.configService.getConfig()),this.subscriptions.add(this.configService.getUpdates().pipe((0,g.map)(i=>{this.updateConfig(i)})).subscribe()),null==this.modelMgr&&(this.modelMgr=c.dtcde.getModelManager(),console.warn("DontCodeModelManager not found by Angular's DI"))}ngOnDestroy(){this.subscriptions.unsubscribe()}updateConfig(t){null!=t.storeApiUrl&&(this.apiUrl=t.storeApiUrl),null!=t.documentApiUrl&&(this.docUrl=t.documentApiUrl)}storeEntity(t,o){const r=this.modelMgr.findAtPosition(t,!1);if(null===r)return Promise.reject("No entity found at position "+t);const i=o._id;return(0,T.lastValueFrom)(null!=i?this.http.put(this.apiUrl+"/"+r.name+"/"+i,o,{observe:"body",responseType:"json"}):this.http.post(this.apiUrl+"/"+r.name,o,{observe:"body",responseType:"json"}))}loadEntity(t,o){const r=this.modelMgr.findAtPosition(t,!1);if(null===r)return Promise.reject("No entity found at position "+t);const i=this.http.get(this.apiUrl+"/"+r.name+"/"+o,{observe:"body",responseType:"json"});return(0,T.lastValueFrom)(i)}deleteEntity(t,o){const r=this.modelMgr.findAtPosition(t,!1);return null===r?Promise.reject("No entity found at position "+t):this.http.delete(this.apiUrl+"/"+r.name+"/"+o,{observe:"body",responseType:"json"}).toPromise().then(i=>!0)}searchEntities(t,...o){const r=this.modelMgr.findAtPosition(t,!1);return null===r?(0,T.throwError)(()=>new Error("No entity found at position "+t)):this.http.get(this.apiUrl+"/"+r.name,{observe:"body",responseType:"json"}).pipe((0,g.map)(i=>c.StoreProviderHelper.applyFilters(i,...o)))}canStoreDocument(t){return!0}storeDocuments(t,o){const r=new FormData,i=new b.HttpHeaders;i.append("Content-Type","multipart/form-data"),i.append("Accept","application/json");let p=0;return t.forEach(E=>{r.append("document#"+p,E),p++}),this.http.post(this.docUrl,r,{headers:i}).pipe((0,g.mergeAll)())}static#e=this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(b.HttpClient),e.\u0275\u0275inject(c.DontCodeModelManager,8),e.\u0275\u0275inject(l.CommonConfigService))};static#t=this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Q=m(94339);const Ee=["EDIT_DATE"],we=["READ_DATE"],Se=["EDIT_DATE_TIME"],be=["READ_DATE_TIME"],Fe=["EDIT_TIME"],Me=["READ_TIME"];function De(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,6),e.\u0275\u0275elementStart(1,"p-calendar",7),e.\u0275\u0275listener("onSelect",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.dateSelected(i.form,r))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("name",t.name)("formControlName",t.name)}}function Ne(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,6),e.\u0275\u0275elementStart(1,"p-calendar",8),e.\u0275\u0275listener("onSelect",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.dateSelected(i.form,r))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("name",t.name)("formControlName",t.name)("showTime",!0)}}function Pe(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,6),e.\u0275\u0275elementStart(1,"p-calendar",9),e.\u0275\u0275listener("onSelect",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.dateSelected(i.form,r))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("name",t.name)("formControlName",t.name)("timeOnly",!0)}}function Re(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"span",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("pTooltip",t.localizeLongDate(t.value)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.localizeShortDate(t.value))}}function Ae(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"span",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("pTooltip",t.localizeLongDate(t.value)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.localizeShortDate(t.value))}}function Le(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"span",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("pTooltip",t.localizeLongDate(t.value)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.localizeShortDate(t.value))}}let k=(()=>{class n extends l.AbstractDynamicComponent{constructor(){super(...arguments),this.longConverter=Intl.DateTimeFormat(navigator.language,{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long"}),this.shortConverter=Intl.DateTimeFormat(navigator.language,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"})}providesTemplates(t){switch(this.updateConverters(t),t){case"Date":return new l.TemplateList(this.readDateTemplate,null,this.editDateTemplate);case"Date & Time":return new l.TemplateList(this.readDateTimeTemplate,null,this.editDateTimeTemplate);default:return new l.TemplateList(this.readTimeTemplate,null,this.editTimeTemplate)}}updateConverters(t){switch(t){case"Date":this.longConverter=Intl.DateTimeFormat(navigator.language,{weekday:"long",day:"numeric",month:"long",year:"numeric"}),this.shortConverter=Intl.DateTimeFormat(navigator.language,{day:"2-digit",month:"2-digit",year:"numeric"});break;case"Date & Time":this.longConverter=Intl.DateTimeFormat(navigator.language,{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long"}),this.shortConverter=Intl.DateTimeFormat(navigator.language,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"});break;default:this.longConverter=Intl.DateTimeFormat(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long"}),this.shortConverter=Intl.DateTimeFormat(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"})}}localizeLongDate(t){return this.longConverter.format(t)}localizeShortDate(t){return this.shortConverter.format(t)}canProvide(t){switch(t){case"Date":case"Date & Time":case"Time":return new l.PossibleTemplateList(!0,!1,!0);default:return new l.PossibleTemplateList(!1,!1,!1)}}dateSelected(t,o){console.log("Selection:",o);const i=t.get(this.name);null!=i?(i.setValue(o),i.markAsDirty()):console.error("Cannot set date of unknown form control with name "+this.name)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}();static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["plugins-time-fields"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(Ee,7),e.\u0275\u0275viewQuery(we,7),e.\u0275\u0275viewQuery(Se,7),e.\u0275\u0275viewQuery(be,7),e.\u0275\u0275viewQuery(Fe,7),e.\u0275\u0275viewQuery(Me,7)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.editDateTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.readDateTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.editDateTimeTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.readDateTimeTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.editTimeTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.readTimeTemplate=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:12,vars:0,consts:[["EDIT_DATE",""],["EDIT_DATE_TIME",""],["EDIT_TIME",""],["READ_DATE",""],["READ_DATE_TIME",""],["READ_TIME",""],[3,"formGroup"],[3,"name","formControlName","onSelect"],[3,"name","formControlName","showTime","onSelect"],[3,"name","formControlName","timeOnly","onSelect"],[3,"pTooltip"]],template:function(o,r){1&o&&(e.\u0275\u0275template(0,De,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(2,Ne,2,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,Pe,2,4,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,Re,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(8,Ae,2,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(10,Le,2,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor))},dependencies:[s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,Q.Calendar,f.Tooltip]})}return n})();var M=m(79819),j=m(83045);const Ve=["EDIT_URL"],Ge=["READ_URL"],Be=["EDIT_IMAGE"],Ue=["READ_IMAGE"];function Qe(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275element(1,"input",6),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("name",t.name)("formControlName",t.name)}}function ke(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"p-fileUpload",11),e.\u0275\u0275listener("uploadHandler",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.uploadImage(r))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("name",t.name+"-img")("auto",!0)("multiple",!1)("customUpload",!0)}}function je(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275elementStart(1,"div",7)(2,"div",8),e.\u0275\u0275template(3,ke,1,4,"p-fileUpload",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10),e.\u0275\u0275element(5,"input",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.supportsImageUpload()),e.\u0275\u0275advance(2),e.\u0275\u0275property("name",t.name)("formControlName",t.name)}}function Oe(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"a",12),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("pTooltip",t.value)("href",t.value,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.calculateUrl(t.value))}}function He(n,a){if(1&n&&e.\u0275\u0275element(0,"img",13),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",t.value,e.\u0275\u0275sanitizeUrl)}}let O=(()=>{class n extends l.AbstractDynamicComponent{constructor(t,o,r){super(),this.confirm=t,this.storeMgr=o,this.ref=r,null==this.storeMgr&&(this.storeMgr=c.dtcde.getStoreManager(),console.warn("DontCodeStoreManager not found by Angular's Injector"))}providesTemplates(t){return"Website (url)"===t?new l.TemplateList(this.readUrlTemplate,null,this.editUrlTemplate):new l.TemplateList(this.readImageTemplate,null,this.editImageTemplate)}canProvide(t){switch(t){case"Website (url)":case"Image":return new l.PossibleTemplateList(!0,!1,!0);default:return new l.PossibleTemplateList(!1,!1,!1)}}calculateUrl(t){return t&&(t.includes("//")&&(t=t.substring(t.indexOf("//")+2)),t.length>20?t.substring(0,17)+"...":t)}supportsImageUpload(){return this.storeMgr.canStoreDocument(this.parentPosition||void 0)}uploadImage(t){console.info("Uploading image",t),this.form.get(this.name)?.setValue(void 0),this.value=null,this.subscriptions.add(this.storeMgr.storeDocuments(t.files,this.parentPosition||void 0).pipe((0,g.map)(o=>(console.debug("File uploaded:",o.documentId),this.form.get(this.name)?.setValue(o.documentId),this.value=o.documentId,o))).subscribe({error:o=>{this.fileUpload.clear(),this.ref.markForCheck(),this.ref.detectChanges(),this.confirm.confirm({header:"Error",message:"Error:"+JSON.stringify(o,null,4)})},complete:()=>{this.fileUpload.clear(),this.ref.markForCheck(),this.ref.detectChanges()}}))}static#e=this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(d.ConfirmationService),e.\u0275\u0275directiveInject(c.DontCodeStoreManager,8),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["plugins-web-fields"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(Ve,7),e.\u0275\u0275viewQuery(Ge,7),e.\u0275\u0275viewQuery(Be,7),e.\u0275\u0275viewQuery(Ue,7),e.\u0275\u0275viewQuery(M.FileUpload,5)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.editUrlTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.readUrlTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.editImageTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.readImageTemplate=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.fileUpload=i.first)}},features:[e.\u0275\u0275ProvidersFeature([d.ConfirmationService]),e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:0,consts:[["header","Error","icon","pi pi-exclamation-triangle"],["EDIT_URL",""],["EDIT_IMAGE",""],["READ_URL",""],["READ_IMAGE",""],[3,"formGroup"],["pInputText","",1,"w-full",3,"name","formControlName"],[1,"grid"],[1,"col-2"],["mode","basic","chooseLabel","Browse","accept","image/*",3,"name","auto","multiple","customUpload","uploadHandler",4,"ngIf"],[1,"col-10"],["mode","basic","chooseLabel","Browse","accept","image/*",3,"name","auto","multiple","customUpload","uploadHandler"],["target","_blank",3,"pTooltip","href"],[1,"inline-image",3,"src"]],template:function(o,r){1&o&&(e.\u0275\u0275element(0,"p-confirmDialog",0),e.\u0275\u0275template(1,Qe,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,je,6,4,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Oe,2,3,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(7,He,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor))},dependencies:[u.NgIf,s.DefaultValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,I.InputText,s.FormGroupDirective,s.FormControlName,f.Tooltip,M.FileUpload,j.ConfirmDialog],styles:[".inline-image[_ngcontent-%COMP%]{max-height:5em;max-width:10em}.tip-image[_ngcontent-%COMP%]{max-height:50em;max-width:100em}"]})}return n})(),H=(()=>{class n{constructor(){console.log("Basic Plugin registering"),c.dtcde.registerPlugin(new y)}exposedPreviewHandlers(){return new Map([["BasicEntityComponent",G],["BasicFieldsComponent",U],["TimeFieldsComponent",k],["WebFieldsComponent",O],["DontCodeApiStoreProvider",F]])}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n,id:"dontcode-plugin/basic"});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({providers:[F],imports:[u.CommonModule,h.TableModule,S.TabViewModule,B.CheckboxModule,s.FormsModule,v.InputNumberModule,I.InputTextModule,L.ToolbarModule,V.ButtonModule,s.ReactiveFormsModule,Q.CalendarModule,f.TooltipModule,M.FileUploadModule,j.ConfirmDialogModule,l.PluginCommonModule.forRoot(),R.InputTextareaModule]})}return n})();e.\u0275\u0275registerNgModuleType(H,"dontcode-plugin/basic");class Ke{getConfiguration(){return{plugin:{id:"FieldsPlugin","display-name":"Dont code plugin for specific fields like country, currency",version:"1.0.0"},"schema-updates":[{id:"country-type",description:"Add Country as a type of field",changes:[{location:{parent:"#/$defs/field",id:"type"},update:{enum:[{Social:{enum:["Rating"]}}]},replace:!1}]}],"preview-handlers":[{location:{parent:c.DontCodeModel.APP_FIELDS,id:"type",values:[{Social:{enum:["Rating"]}}]},class:{name:"RatingComponent",source:"fields"}},{location:{parent:c.DontCodeModel.APP_FIELDS,id:"type",values:[{International:{enum:["Country"]}}]},class:{name:"CountryComponent",source:"fields"}},{location:{parent:c.DontCodeModel.APP_FIELDS,id:"type",values:[{International:{enum:["Currency"]}}]},class:{name:"CurrencyComponent",source:"fields"}},{location:{parent:c.DontCodeModel.APP_FIELDS,id:"type",values:[{Money:{enum:["Euro","Dollar"]}}]},class:{name:"EuroDollarComponent",source:"fields"}},{location:{parent:c.DontCodeModel.APP_FIELDS,id:"type",values:[{Money:{enum:["Other currency"]}}]},class:{name:"MoneyComponent",source:"fields"}}]}}pluginInit(a){}}var D=m(75090);const ze=JSON.parse('{"locale":"en","countries":{"AF":"Afghanistan","AL":"Albania","DZ":"Algeria","AS":"American Samoa","AD":"Andorra","AO":"Angola","AI":"Anguilla","AQ":"Antarctica","AG":"Antigua and Barbuda","AR":"Argentina","AM":"Armenia","AW":"Aruba","AU":"Australia","AT":"Austria","AZ":"Azerbaijan","BS":"Bahamas","BH":"Bahrain","BD":"Bangladesh","BB":"Barbados","BY":"Belarus","BE":"Belgium","BZ":"Belize","BJ":"Benin","BM":"Bermuda","BT":"Bhutan","BO":"Bolivia","BA":"Bosnia and Herzegovina","BW":"Botswana","BV":"Bouvet Island","BR":"Brazil","IO":"British Indian Ocean Territory","BN":"Brunei Darussalam","BG":"Bulgaria","BF":"Burkina Faso","BI":"Burundi","KH":"Cambodia","CM":"Cameroon","CA":"Canada","CV":"Cape Verde","KY":"Cayman Islands","CF":"Central African Republic","TD":"Chad","CL":"Chile","CN":["People\'s Republic of China","China"],"CX":"Christmas Island","CC":"Cocos (Keeling) Islands","CO":"Colombia","KM":"Comoros","CG":["Republic of the Congo","Congo"],"CD":["Democratic Republic of the Congo","Congo"],"CK":"Cook Islands","CR":"Costa Rica","CI":["Cote d\'Ivoire","C\xf4te d\'Ivoire","Ivory Coast"],"HR":"Croatia","CU":"Cuba","CY":"Cyprus","CZ":["Czech Republic","Czechia"],"DK":"Denmark","DJ":"Djibouti","DM":"Dominica","DO":"Dominican Republic","EC":"Ecuador","EG":"Egypt","SV":"El Salvador","GQ":"Equatorial Guinea","ER":"Eritrea","EE":"Estonia","ET":"Ethiopia","FK":"Falkland Islands (Malvinas)","FO":"Faroe Islands","FJ":"Fiji","FI":"Finland","FR":"France","GF":"French Guiana","PF":"French Polynesia","TF":"French Southern Territories","GA":"Gabon","GM":["Republic of The Gambia","The Gambia","Gambia"],"GE":"Georgia","DE":"Germany","GH":"Ghana","GI":"Gibraltar","GR":"Greece","GL":"Greenland","GD":"Grenada","GP":"Guadeloupe","GU":"Guam","GT":"Guatemala","GN":"Guinea","GW":"Guinea-Bissau","GY":"Guyana","HT":"Haiti","HM":"Heard Island and McDonald Islands","VA":"Holy See (Vatican City State)","HN":"Honduras","HK":"Hong Kong","HU":"Hungary","IS":"Iceland","IN":"India","ID":"Indonesia","IR":["Islamic Republic of Iran","Iran"],"IQ":"Iraq","IE":"Ireland","IL":"Israel","IT":"Italy","JM":"Jamaica","JP":"Japan","JO":"Jordan","KZ":"Kazakhstan","KE":"Kenya","KI":"Kiribati","KP":"North Korea","KR":["South Korea","Korea, Republic of","Republic of Korea"],"KW":"Kuwait","KG":"Kyrgyzstan","LA":"Lao People\'s Democratic Republic","LV":"Latvia","LB":"Lebanon","LS":"Lesotho","LR":"Liberia","LY":"Libya","LI":"Liechtenstein","LT":"Lithuania","LU":"Luxembourg","MO":"Macao","MG":"Madagascar","MW":"Malawi","MY":"Malaysia","MV":"Maldives","ML":"Mali","MT":"Malta","MH":"Marshall Islands","MQ":"Martinique","MR":"Mauritania","MU":"Mauritius","YT":"Mayotte","MX":"Mexico","FM":"Micronesia, Federated States of","MD":"Moldova, Republic of","MC":"Monaco","MN":"Mongolia","MS":"Montserrat","MA":"Morocco","MZ":"Mozambique","MM":"Myanmar","NA":"Namibia","NR":"Nauru","NP":"Nepal","NL":["Netherlands","The Netherlands","Netherlands (Kingdom of the)"],"NC":"New Caledonia","NZ":"New Zealand","NI":"Nicaragua","NE":"Niger","NG":"Nigeria","NU":"Niue","NF":"Norfolk Island","MK":["The Republic of North Macedonia","North Macedonia"],"MP":"Northern Mariana Islands","NO":"Norway","OM":"Oman","PK":"Pakistan","PW":"Palau","PS":["State of Palestine","Palestine"],"PA":"Panama","PG":"Papua New Guinea","PY":"Paraguay","PE":"Peru","PH":"Philippines","PN":["Pitcairn","Pitcairn Islands"],"PL":"Poland","PT":"Portugal","PR":"Puerto Rico","QA":"Qatar","RE":"Reunion","RO":"Romania","RU":["Russian Federation","Russia"],"RW":"Rwanda","SH":"Saint Helena","KN":"Saint Kitts and Nevis","LC":"Saint Lucia","PM":"Saint Pierre and Miquelon","VC":"Saint Vincent and the Grenadines","WS":"Samoa","SM":"San Marino","ST":"Sao Tome and Principe","SA":"Saudi Arabia","SN":"Senegal","SC":"Seychelles","SL":"Sierra Leone","SG":"Singapore","SK":"Slovakia","SI":"Slovenia","SB":"Solomon Islands","SO":"Somalia","ZA":"South Africa","GS":"South Georgia and the South Sandwich Islands","ES":"Spain","LK":"Sri Lanka","SD":"Sudan","SR":"Suriname","SJ":"Svalbard and Jan Mayen","SZ":"Eswatini","SE":"Sweden","CH":"Switzerland","SY":"Syrian Arab Republic","TW":["Taiwan, Province of China","Taiwan"],"TJ":"Tajikistan","TZ":["United Republic of Tanzania","Tanzania"],"TH":"Thailand","TL":"Timor-Leste","TG":"Togo","TK":"Tokelau","TO":"Tonga","TT":"Trinidad and Tobago","TN":"Tunisia","TR":["T\xfcrkiye","Turkey"],"TM":"Turkmenistan","TC":"Turks and Caicos Islands","TV":"Tuvalu","UG":"Uganda","UA":"Ukraine","AE":["United Arab Emirates","UAE"],"GB":["United Kingdom","UK","Great Britain"],"US":["United States of America","United States","USA","U.S.A.","US","U.S."],"UM":"United States Minor Outlying Islands","UY":"Uruguay","UZ":"Uzbekistan","VU":"Vanuatu","VE":"Venezuela","VN":"Vietnam","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","WF":"Wallis and Futuna","EH":"Western Sahara","YE":"Yemen","ZM":"Zambia","ZW":"Zimbabwe","AX":["\xc5land Islands","Aland Islands"],"BQ":"Bonaire, Sint Eustatius and Saba","CW":"Cura\xe7ao","GG":"Guernsey","IM":"Isle of Man","JE":"Jersey","ME":"Montenegro","BL":"Saint Barth\xe9lemy","MF":"Saint Martin (French part)","RS":"Serbia","SX":"Sint Maarten (Dutch part)","SS":"South Sudan","XK":"Kosovo"}}');var N=m(78905);const We=["inlineView"],Je=["fullEditView"];function Ze(n,a){if(1&n&&(e.\u0275\u0275element(0,"span",2),e.\u0275\u0275text(1)),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass","flag-icon-"+(null==t.value?null:t.value.toLowerCase())),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.value)}}function Ye(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"span",2),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass","flag-icon-"+(null==t.form.controls[t.name].value?null:t.form.controls[t.name].value.toLowerCase())),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.form.controls[t.name].value," ")}}function $e(n,a){if(1&n&&e.\u0275\u0275template(0,Ye,3,2,"div",7),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.form.controls[t.name].value)}}function Xe(n,a){if(1&n&&(e.\u0275\u0275element(0,"span",2),e.\u0275\u0275text(1)),2&n){const t=a.$implicit;e.\u0275\u0275property("ngClass","flag-icon-"+(null==t?null:t.alpha2code.toLowerCase())),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function qe(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,3),e.\u0275\u0275elementStart(1,"p-dropdown",4),e.\u0275\u0275template(2,$e,1,1,"ng-template",5),e.\u0275\u0275template(3,Xe,2,2,"ng-template",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.countries)("formControlName",t.name)("filter",!0)("showClear",!0)}}let K=(()=>{class n extends l.AbstractDynamicComponent{constructor(){super(...arguments),this.countries=new Array}ngOnInit(){D.registerLocale(ze);for(const t in D.getAlpha2Codes())this.countries.push({name:D.getName(t,"en")||t,alpha2code:t})}providesTemplates(){return new l.TemplateList(this.inlineView,null,this.fullEditView)}canProvide(t){return new l.PossibleTemplateList(!0,!1,!0)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}();static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dontcode-fields-country"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(We,7),e.\u0275\u0275viewQuery(Je,7)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.inlineView=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.fullEditView=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:0,consts:[["inlineView",""],["fullEditView",""],[1,"flag-icon",3,"ngClass"],[3,"formGroup"],["optionLabel","name","optionValue","alpha2code","filterBy","name","placeholder","Select a Country",3,"options","formControlName","filter","showClear"],["pTemplate","selectedItem"],["pTemplate","item"],[4,"ngIf"]],template:function(o,r){1&o&&(e.\u0275\u0275template(0,Ze,2,2,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(2,qe,4,5,"ng-template",null,1,e.\u0275\u0275templateRefExtractor))},dependencies:[u.NgClass,u.NgIf,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,N.Dropdown,d.PrimeTemplate]})}return n})();var et=m(55273),tt=m.n(et);const nt=["inlineView"],ot=["fullEditView"];function rt(n,a){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275textInterpolate(t.value)}}function it(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.form.controls[t.name].value," ")}}function at(n,a){if(1&n&&e.\u0275\u0275template(0,it,2,1,"div",7),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngIf",t.form.controls[t.name].value)}}function lt(n,a){if(1&n&&e.\u0275\u0275text(0),2&n){const t=a.$implicit;e.\u0275\u0275textInterpolate2(" ",t.currency," - ",t.currencyCode," ")}}function st(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,3),e.\u0275\u0275elementStart(1,"p-dropdown",4),e.\u0275\u0275template(2,at,1,1,"ng-template",5),e.\u0275\u0275template(3,lt,1,2,"ng-template",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.currencies)("formControlName",t.name)("filter",!0)("showClear",!0)}}function ct(n,a){if(1&n&&e.\u0275\u0275template(0,st,4,5,"ng-container",2),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form)}}let z=(()=>{class n extends l.AbstractDynamicComponent{constructor(){super(),this.currencies=new Array;const t=new Map;tt().countryCurrencyList().forEach(o=>{o.currency&&o.currency_code&&t.set(o.currency,o.currency_code)}),this.currencies=[],t.forEach((o,r)=>{this.currencies.push({currency:r,currencyCode:o})}),this.currencies=this.currencies.sort((o,r)=>o.currency.localeCompare(r.currency))}providesTemplates(){return new l.TemplateList(this.inlineView,null,this.fullEditView)}canProvide(t){return new l.PossibleTemplateList(!0,!1,!0)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dontcode-fields-currency"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(nt,7),e.\u0275\u0275viewQuery(ot,7)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.inlineView=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.fullEditView=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:0,consts:[["inlineView",""],["fullEditView",""],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["optionValue","currencyCode","filterBy","currency","placeholder","Select a Currency",3,"options","formControlName","filter","showClear"],["pTemplate","selectedItem"],["pTemplate","item"],[4,"ngIf"]],template:function(o,r){1&o&&(e.\u0275\u0275template(0,rt,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(2,ct,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor))},dependencies:[u.NgIf,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,N.Dropdown,d.PrimeTemplate]})}return n})();const mt=["inlineView"],pt=["fullEditView"];function ut(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"span",3),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.localizedAmount(t.value.amount))}}function dt(n,a){if(1&n&&e.\u0275\u0275template(0,ut,2,1,"span",2),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",null==t.value?null:t.value.amount)}}function ft(n,a){if(1&n&&e.\u0275\u0275element(0,"p-inputNumber",7),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("currency",t.value.currencyCode)("name",t.name)("formControlName",t.name)}}function gt(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275template(1,ft,1,3,"p-inputNumber",6),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.value?null:t.value.currencyCode)}}function ht(n,a){if(1&n&&e.\u0275\u0275template(0,gt,2,2,"ng-container",4),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form)}}let W=(()=>{class n extends l.AbstractDynamicComponent{constructor(){super(),this.value=new c.MoneyAmount,this.converter=Intl.NumberFormat(navigator.language,{style:"currency",currency:"EUR"})}providesTemplates(t){switch(t){case"Euro":case"Dollar":return this.value.currencyCode="Euro"===t?"EUR":"USD",this.updateConverter(),new l.TemplateList(this.inlineView,null,this.fullEditView);default:return new l.TemplateList(null,null,null)}}setValue(t){null==t?(t=new c.MoneyAmount).currencyCode=this.value.currencyCode:t.currencyCode!=this.value.currencyCode&&null!=this.value.currencyCode&&console.warn("Setting currencyCode to "+t.currencyCode+" that is different from the component one ("+this.value.currencyCode+")"),super.setValue(t)}canProvide(t){switch(t){case"Euro":case"Dollar":return this.value.currencyCode="Euro"===t?"EUR":"USD",this.updateConverter(),new l.PossibleTemplateList(!0,!1,!0)}return new l.PossibleTemplateList(!1,!1,!1)}updateConverter(){null!=this.value?.currencyCode&&(this.converter=Intl.NumberFormat(navigator.language,{style:"currency",currency:this.value.currencyCode}))}localizedAmount(t){return null==t?this.value.currencyCode??"":this.converter.format(t)}transformToFormGroupValue(t){return null==t?.amount?null:t.amount}transformFromFormGroupValue(t){return this.value.amount=t,this.value}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dontcode-fields-eurodollar"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(mt,7),e.\u0275\u0275viewQuery(pt,7)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.inlineView=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.fullEditView=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:0,consts:[["inlineView",""],["fullEditView",""],["class","numeric",4,"ngIf"],[1,"numeric"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["mode","currency",3,"currency","name","formControlName",4,"ngIf"],["mode","currency",3,"currency","name","formControlName"]],template:function(o,r){1&o&&(e.\u0275\u0275template(0,dt,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(2,ht,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor))},dependencies:[u.NgIf,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,v.InputNumber],styles:[".numeric[_ngcontent-%COMP%]{text-align:end}"]})}return n})();const _t=["inlineView"],Ct=["fullEditView"];function yt(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"span",3),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.localizedAmount(t.value.amount))}}function vt(n,a){if(1&n&&e.\u0275\u0275template(0,yt,2,1,"span",2),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",null==t.value?null:t.value.currencyCode)}}function Tt(n,a){1&n&&e.\u0275\u0275elementContainer(0)}function xt(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275elementStart(1,"div",6)(2,"div",7),e.\u0275\u0275element(3,"p-inputNumber",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",9),e.\u0275\u0275template(5,Tt,1,0,"ng-container",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("name",t.name)("minFractionDigits",2),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",t.subFieldFullEditTemplate("currencyCode"))}}function It(n,a){if(1&n&&e.\u0275\u0275template(0,xt,6,4,"ng-container",4),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form)}}let J=(()=>{class n extends l.AbstractDynamicLoaderComponent{constructor(t,o,r){super(t,o,r),this.value=new c.MoneyAmount,this.converter=null,this.defineSubField("currencyCode","Currency")}providesTemplates(t){return new l.TemplateList(this.inlineView,null,this.fullEditView)}canProvide(t){return new l.PossibleTemplateList(!0,!1,!0)}createAndRegisterFormControls(){this.form.registerControl("amount",new s.FormControl(null,{updateOn:"blur"}))}loadSubField(t,o,r){return super.loadSubField(t,o,r)}getAmountSafe(){return this.value?.amount}setValue(t){null==t&&(t=new c.MoneyAmount),super.setValue(t),this.updateConverter()}updateConverter(){this.converter=null!=this.value?.currencyCode?Intl.NumberFormat(navigator.language,{style:"currency",currency:this.value.currencyCode}):null}localizedAmount(t){return null==t?this.value?.currencyCode??"":null!=this.converter?this.converter?.format(t):t.toString()}subFieldFullEditTemplate(t){return super.subFieldFullEditTemplate(t)}static#e=this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(l.ComponentLoaderService),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dontcode-fields-money"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(_t,7),e.\u0275\u0275viewQuery(Ct,7)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.inlineView=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.fullEditView=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:0,consts:[["inlineView",""],["fullEditView",""],["class","numeric",4,"ngIf"],[1,"numeric"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"grid"],[1,"col-12","md:col-8"],["formControlName","amount",3,"name","minFractionDigits"],[1,"col-12","md:col-4"],[4,"ngTemplateOutlet"]],template:function(o,r){1&o&&(e.\u0275\u0275element(0,"dtcde-dynamic"),e.\u0275\u0275template(1,vt,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,It,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor))},dependencies:[u.NgIf,u.NgTemplateOutlet,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,l.DynamicInsertPoint,v.InputNumber]})}return n})();var Z=m(49806);const Et=["inlineView"],wt=["fullEditView"];function St(n,a){if(1&n&&e.\u0275\u0275element(0,"p-rating",3),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("readonly",!0)("ngModel",t.value)("cancel",!1)}}function bt(n,a){if(1&n&&e.\u0275\u0275template(0,St,1,3,"p-rating",2),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.value)}}function Ft(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275element(1,"p-rating",6),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("readonly",!1)("formControlName",t.name)}}function Mt(n,a){if(1&n&&e.\u0275\u0275template(0,Ft,2,3,"ng-container",4),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form)}}let Y=(()=>{class n extends l.AbstractDynamicComponent{providesTemplates(){return new l.TemplateList(this.inlineView,null,this.fullEditView)}canProvide(t){return new l.PossibleTemplateList(!0,!1,!0)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}();static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dontcode-fields-rating"]],viewQuery:function(o,r){if(1&o&&(e.\u0275\u0275viewQuery(Et,7),e.\u0275\u0275viewQuery(wt,7)),2&o){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.inlineView=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.fullEditView=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:0,consts:[["inlineView",""],["fullEditView",""],["iconOnClass","pi pi-star-fill","iconOffClass","pi pi-star",3,"readonly","ngModel","cancel",4,"ngIf"],["iconOnClass","pi pi-star-fill","iconOffClass","pi pi-star",3,"readonly","ngModel","cancel"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["iconOnClass","pi pi-star-fill","iconOffClass","pi pi-star",3,"readonly","formControlName"]],template:function(o,r){1&o&&(e.\u0275\u0275template(0,bt,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(2,Mt,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor))},dependencies:[u.NgIf,s.NgControlStatus,s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,s.NgModel,Z.Rating]})}return n})(),$=(()=>{class n{constructor(){console.log("Fields Plugin registering"),c.dtcde.registerPlugin(new Ke)}exposedPreviewHandlers(){return new Map([["CountryComponent",K],["CurrencyComponent",z],["EuroDollarComponent",W],["MoneyComponent",J],["RatingComponent",Y]])}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.\u0275\u0275defineNgModule({type:n,id:"dontcode-plugin/fields"});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.CommonModule,b.HttpClientModule,s.ReactiveFormsModule,N.DropdownModule,l.PluginCommonModule,v.InputNumberModule,s.FormsModule,Z.RatingModule]})}return n})();e.\u0275\u0275registerNgModuleType($,"dontcode-plugin/fields")},85582:(X,x,m)=>{function u(y,_,l,g,e,h,d){try{var f=y[h](d),C=f.value}catch(w){return void l(w)}f.done?_(C):Promise.resolve(C).then(g,e)}function c(y){return function(){var _=this,l=arguments;return new Promise(function(g,e){var h=y.apply(_,l);function d(C){u(h,g,e,d,f,"next",C)}function f(C){u(h,g,e,d,f,"throw",C)}d(void 0)})}}m.d(x,{Z:()=>c})}}]);